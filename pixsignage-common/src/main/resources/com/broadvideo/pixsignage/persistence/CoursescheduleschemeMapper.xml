<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.broadvideo.pixsignage.persistence.CoursescheduleschemeMapper" >
  <resultMap id="BaseResultMap" type="com.broadvideo.pixsignage.domain.Courseschedulescheme" >
    <id column="coursescheduleschemeid" property="coursescheduleschemeid" jdbcType="INTEGER" />
    <result column="name" property="name" jdbcType="VARCHAR" />
    <result column="description" property="description" jdbcType="VARCHAR" />
    <result column="workdays" property="workdays" jdbcType="VARCHAR" />
    <result column="morningperiods" property="morningperiods" jdbcType="INTEGER" />
    <result column="afternoonperiods" property="afternoonperiods" jdbcType="INTEGER" />
    <result column="nightperiods" property="nightperiods" jdbcType="INTEGER" />
    <result column="periodduration" property="periodduration" jdbcType="INTEGER" />
    <result column="enableflag" property="enableflag" jdbcType="CHAR" />
    <result column="orgid" property="orgid" jdbcType="INTEGER" />
    <result column="createtime" property="createtime" jdbcType="TIMESTAMP" />
    <result column="createpsnid" property="createpsnid" jdbcType="INTEGER" />
    <result column="updatetime" property="updatetime" jdbcType="TIMESTAMP" />
    <result column="updatepsnid" property="updatepsnid" jdbcType="INTEGER" />
  </resultMap>
  <sql id="Base_Column_List" >
    coursescheduleschemeid, name, description, workdays, morningperiods, afternoonperiods, 
    nightperiods, periodduration, enableflag, orgid, createtime, createpsnid, updatetime, 
    updatepsnid
  </sql>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Integer" >
    select 
    <include refid="Base_Column_List" />
    from courseschedulescheme
    where coursescheduleschemeid = #{coursescheduleschemeid,jdbcType=INTEGER}
  </select>
  <select id="selectCourseschedulescheme" resultMap="BaseResultMap">
   select  
    <include refid="Base_Column_List" />
   from courseschedulescheme
   where coursescheduleschemeid=#{coursescheduleschemeid} and orgid=#{orgid}
    
  </select>
  
  <select id="selectEnableCourseschedulescheme"  resultMap="BaseResultMap">
   select
      <include refid="Base_Column_List" />
   from  courseschedulescheme
   where orgid=#{orgid} and enableflag='1'
  </select>
  <select id="selectCoursescheduleschemes"  resultMap="BaseResultMap">
    select 
    <include refid="Base_Column_List" />
      from  courseschedulescheme 
      where orgid=#{orgid}  
      
      <if test="search!=null and search!=''">      
      and  ( name like '%${search}%' or description like '%${search}%' )
      </if>    
      
       order by createtime desc
           
  </select>
  
  <select id="countBy"  resultType="Integer">
    select count(1)  from  courseschedulescheme 
    where orgid=#{orgid}  and name=#{name}
     <if test="excludeid != null" >
       and  coursescheduleschemeid != #{excludeid}
      </if>
  
  </select>
  
  <select id="selectByName"  resultMap="BaseResultMap">
       select 
          <include refid="Base_Column_List" />
      from  courseschedulescheme 
        where orgid=#{orgid}   and  name=#{name}
  
  </select>
  
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer" >
    delete from courseschedulescheme
    where coursescheduleschemeid = #{coursescheduleschemeid,jdbcType=INTEGER}
  </delete>
  <delete id="deleteCourseschedulescheme" >
   delete from courseschedulescheme
   where coursescheduleschemeid=#{coursescheduleschemeid} and orgid=#{orgid}
  </delete>
  <delete id="batchDeleteCoursescheduleschemes">
   delete from courseschedulescheme
   where orgid=#{orgid} and coursescheduleschemeid in 
   <foreach close=")" collection="coursescheduleschemeids" item="coursescheduleschemeid" open="(" separator=",">
      #{coursescheduleschemeid}
   </foreach>
  </delete>
  <insert id="insert" parameterType="com.broadvideo.pixsignage.domain.Courseschedulescheme" >
    <selectKey resultType="java.lang.Integer" keyProperty="coursescheduleschemeid" order="AFTER" >
      SELECT LAST_INSERT_ID()
    </selectKey>
    insert into courseschedulescheme (name, description, workdays, 
      morningperiods, afternoonperiods, nightperiods, 
      periodduration, enableflag, orgid, 
      createtime, createpsnid, updatetime, 
      updatepsnid)
    values (#{name,jdbcType=VARCHAR}, #{description,jdbcType=VARCHAR}, #{workdays,jdbcType=VARCHAR}, 
      #{morningperiods,jdbcType=INTEGER}, #{afternoonperiods,jdbcType=INTEGER}, #{nightperiods,jdbcType=INTEGER}, 
      #{periodduration,jdbcType=INTEGER}, #{enableflag,jdbcType=CHAR}, #{orgid,jdbcType=INTEGER}, 
      #{createtime,jdbcType=TIMESTAMP}, #{createpsnid,jdbcType=INTEGER}, #{updatetime,jdbcType=TIMESTAMP}, 
      #{updatepsnid,jdbcType=INTEGER})
  </insert>
  <insert id="insertSelective" parameterType="com.broadvideo.pixsignage.domain.Courseschedulescheme" >
    <selectKey resultType="java.lang.Integer" keyProperty="coursescheduleschemeid" order="AFTER" >
      SELECT LAST_INSERT_ID()
    </selectKey>
    insert into courseschedulescheme
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="name != null" >
        name,
      </if>
      <if test="description != null" >
        description,
      </if>
      <if test="workdays != null" >
        workdays,
      </if>
      <if test="morningperiods != null" >
        morningperiods,
      </if>
      <if test="afternoonperiods != null" >
        afternoonperiods,
      </if>
      <if test="nightperiods != null" >
        nightperiods,
      </if>
      <if test="periodduration != null" >
        periodduration,
      </if>
      <if test="enableflag != null" >
        enableflag,
      </if>
      <if test="orgid != null" >
        orgid,
      </if>
      <if test="createtime != null" >
        createtime,
      </if>
      <if test="createpsnid != null" >
        createpsnid,
      </if>
      <if test="updatetime != null" >
        updatetime,
      </if>
      <if test="updatepsnid != null" >
        updatepsnid,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="name != null" >
        #{name,jdbcType=VARCHAR},
      </if>
      <if test="description != null" >
        #{description,jdbcType=VARCHAR},
      </if>
      <if test="workdays != null" >
        #{workdays,jdbcType=VARCHAR},
      </if>
      <if test="morningperiods != null" >
        #{morningperiods,jdbcType=INTEGER},
      </if>
      <if test="afternoonperiods != null" >
        #{afternoonperiods,jdbcType=INTEGER},
      </if>
      <if test="nightperiods != null" >
        #{nightperiods,jdbcType=INTEGER},
      </if>
      <if test="periodduration != null" >
        #{periodduration,jdbcType=INTEGER},
      </if>
      <if test="enableflag != null" >
        #{enableflag,jdbcType=CHAR},
      </if>
      <if test="orgid != null" >
        #{orgid,jdbcType=INTEGER},
      </if>
      <if test="createtime != null" >
        #{createtime,jdbcType=TIMESTAMP},
      </if>
      <if test="createpsnid != null" >
        #{createpsnid,jdbcType=INTEGER},
      </if>
      <if test="updatetime != null" >
        #{updatetime,jdbcType=TIMESTAMP},
      </if>
      <if test="updatepsnid != null" >
        #{updatepsnid,jdbcType=INTEGER},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.broadvideo.pixsignage.domain.Courseschedulescheme" >
    update courseschedulescheme
    <set >
      <if test="name != null" >
        name = #{name,jdbcType=VARCHAR},
      </if>
      <if test="description != null" >
        description = #{description,jdbcType=VARCHAR},
      </if>
      <if test="workdays != null" >
        workdays = #{workdays,jdbcType=VARCHAR},
      </if>
      <if test="morningperiods != null" >
        morningperiods = #{morningperiods,jdbcType=INTEGER},
      </if>
      <if test="afternoonperiods != null" >
        afternoonperiods = #{afternoonperiods,jdbcType=INTEGER},
      </if>
      <if test="nightperiods != null" >
        nightperiods = #{nightperiods,jdbcType=INTEGER},
      </if>
      <if test="periodduration != null" >
        periodduration = #{periodduration,jdbcType=INTEGER},
      </if>
      <if test="enableflag != null" >
        enableflag = #{enableflag,jdbcType=CHAR},
      </if>
      <if test="orgid != null" >
        orgid = #{orgid,jdbcType=INTEGER},
      </if>
      <if test="createtime != null" >
        createtime = #{createtime,jdbcType=TIMESTAMP},
      </if>
      <if test="createpsnid != null" >
        createpsnid = #{createpsnid,jdbcType=INTEGER},
      </if>
      <if test="updatetime != null" >
        updatetime = #{updatetime,jdbcType=TIMESTAMP},
      </if>
      <if test="updatepsnid != null" >
        updatepsnid = #{updatepsnid,jdbcType=INTEGER},
      </if>
    </set>
    where coursescheduleschemeid = #{coursescheduleschemeid,jdbcType=INTEGER}  and orgid=#{orgid}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.broadvideo.pixsignage.domain.Courseschedulescheme" >
    update courseschedulescheme
    set name = #{name,jdbcType=VARCHAR},
      description = #{description,jdbcType=VARCHAR},
      workdays = #{workdays,jdbcType=VARCHAR},
      morningperiods = #{morningperiods,jdbcType=INTEGER},
      afternoonperiods = #{afternoonperiods,jdbcType=INTEGER},
      nightperiods = #{nightperiods,jdbcType=INTEGER},
      periodduration = #{periodduration,jdbcType=INTEGER},
      enableflag = #{enableflag,jdbcType=CHAR},
      orgid = #{orgid,jdbcType=INTEGER},
      createtime = #{createtime,jdbcType=TIMESTAMP},
      createpsnid = #{createpsnid,jdbcType=INTEGER},
      updatetime = #{updatetime,jdbcType=TIMESTAMP},
      updatepsnid = #{updatepsnid,jdbcType=INTEGER}
    where coursescheduleschemeid = #{coursescheduleschemeid,jdbcType=INTEGER}
  </update>
  <update id="disableCoursescheduleschemes"  >
   update courseschedulescheme  set enableflag='0',updatepsnid=#{updatepsnid},updatetime=now()
   where coursescheduleschemeid!=#{excludeid}  and  orgid=#{orgid} 
  </update>
</mapper>