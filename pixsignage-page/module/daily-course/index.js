'use strict';var DailyCourse=function(d,h){this.zonediv=d,this.zone=h,common.dailyCourse.push(this),this.resize=function(a){$(d).css({"box-sizing":'border-box',"border-color":h.bdcolor,"border-style":h.bdstyle,"border-width":parseInt(h.bdwidth)/a+'px',"border-radius":parseInt(h.bdradius)/a+'px',color:h.color,"font-family":h.fontfamily,"font-size":parseInt(h.fontsize)/a+'px',"text-align":h.align,"font-weight":h.fontweight,"font-style":h.fontstyle,"line-height":'1px'}),$(d).find('td').css({"border-width":Math.ceil(h.rulewidth/a)+'px',"border-color":h.rulecolor,"word-wrap":'break-word',"white-space":'pre-wrap',"text-decoration":h.decoration})},this.init=function(){var b=this;$.ajax({url:common.baseUrl+'/classrooms/'+common.classRoom.id+'/schedules?ts='+Date.now(),contentType:'application/json; charset=UTF-8',dataType:'json'}).then(function(a){if(0!=a.retcode)throw new Error('failed to get day course list.');for(var c=a.course_schedules.filter(function(b){return moment().format('E')==b.workday}).map(function(b){return b.current=moment(b.start_time,'HH:mm').isBefore(moment())&&moment(b.end_time,'HH:mm').isAfter(moment()),b}),d=[],e=0;e<b.zone.rows;e++)c[e]?d.push(c[e]):d.push({start_time:' ',course_name:' '});var f=doT.template('<table>\n            <tbody>\n            {{~it:course:index}}\n            <tr class="day-course-tr {{? course.current}}is-current{{?}}">\n                <td>{{=course.start_time}}</td>\n                <td>{{=course.course_name}}</td>\n            </tr>\n            {{~}}\n            </tbody>\n        </table>');b.zonediv.html(f(d)),b.zonediv.find('table').css({width:'100%',height:'100%'}),b.zonediv.find('table').attr('rules',h.rules),b.zonediv.find('tr td:first').attr('width','30%')}).catch(function(b){console.log(b.message)})}};

//# sourceMappingURL=index.js.map