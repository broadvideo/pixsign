{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["'use strict';var HomeSchool=function(e,c){this.zonediv=e,this.zone=c,common.homeSchool.push(this);var d={},f='<div class=\"home-school-popup\">\\n            <div style=\"padding: 0 5px;\">\\n                <span class=\"home-school-close\"><i class=\"fa fa-times\"></i></span>\\n                <p class=\"home-school-title\">\\u6D88\\u606F\\u5217\\u8868</p>\\n            </div>\\n            <hr style=\"margin: 0\">\\n            <table class=\"home-school-table\">\\n                <tbody>\\n                {{~it:message:index}}\\n                <tr class=\"home-school-tr\">\\n                    <td class=\"home-school-avatar\">\\n                        <img src=\"{{=message.headimgurl}}\"/>\\n                    </td>\\n                    <td class=\"home-school-name\">\\n                        <span>{{=message.name}}</span>\\n                    </td>\\n                    <td class=\"home-school-message\">\\n                        {{? message.message_info}}\\n                        <span>{{=message.message_info}}</span>\\n                        {{?}}\\n                        {{? message.mp3_file}}\\n                        <audio src=\"{{=message.mp3_file}}\" controls=controls></audio>\\n                        {{?}}\\n                    </td>\\n                    <td class=\"home-school-ts\">\\n                        <span>{{=message.send_time}}</span>\\n                    </td>\\n                </tr>\\n                {{~}}\\n                </tbody>\\n            </table>\\n            <hr style=\"margin: 0\">\\n            <div style=\"padding:0 5px\">\\n                <span class=\"home-school-audio\"><i class=\"fa fa-bullhorn\"></i></span>\\n            </div>\\n        </div>',a=function(){$.ajax({url:common.baseUrl+'/classrooms/'+common.classRoom.id+'/messagesum?ts='+Date.now(),dataType:'text'}).then(function(f){console.log(JSON.stringify(f));var a=Base64.decode(f),b=JSON.parse(a);console.log(b),b.forEach(function(b){common.students.forEach(function(c){c.student_no===b.student_no&&(b.avatar=c.avatar)})});var c=doT.template('<table class=\"home-school-table\">\\n            <tbody>\\n            {{? it.length == 0}}\\n            \\u65E0\\u7559\\u8A00\\u8BB0\\u5F55\\n            {{?}}\\n            {{~it:msgSum:index}}\\n            <tr class=\"home-school-tr\">\\n                <td class=\"home-school-avatar\">\\n                    <img src=\"{{=msgSum.avatar}}\"/>\\n                </td>\\n                <td class=\"home-school-name\">\\n                    <span>{{=msgSum.student_name}}</span>\\n                </td>\\n                <td class=\"home-school-sum\">\\n                    <span>{{=msgSum.num}}</span>\\n                </td>\\n            </tr>\\n            {{~}}\\n            </tbody>\\n        </table>');$(e).html(c(b))}).catch(function(a){console.log(JSON.stringify(a))})};this.init=function(){a(),setInterval(a,5e3),$('body').on('click','.home-school-close',function(){$('.home-school-popup').remove()}),$('body').on('click','.home-school-audio',function(b){if(b.preventDefault(),console.log('recording button is clicked'),$(this).hasClass('recording')){$(this).removeClass('recording');var c=window.android.closeVoiceRecorder(),f={student_id:d.id,text:'',audio:c,msg_time:Date.now()};$.ajax({url:common.baseUrl+'/students/'+d.id+'/message?ts='+Date.now(),type:'POST',cache:!1,data:JSON.stringify(f),contentType:'application/json',dataType:'json'}).then(function(){console.log('send message successfully')}).catch(function(a){console.log(JSON.stringify(a))})}else $(this).addClass('recording'),window.android.openVoiceRecorder()})},this.resize=function(a){e.css({\"box-sizing\":'border-box',\"border-color\":c.bdcolor,\"border-style\":c.bdstyle,\"border-width\":parseInt(c.bdwidth)/a+'px',\"border-radius\":parseInt(c.bdradius)/a+'px',color:c.color,\"font-family\":c.fontfamily,\"font-size\":parseInt(c.fontsize)/a+'px',\"text-align\":c.align,\"font-weight\":c.fontweight,\"font-style\":c.fontstyle})},this.swipe=function(b){var c=common.students.filter(function(c){return c.hard_id==b});c.length&&(d=c[0],$.ajax({url:common.baseUrl+'/students/'+d.id+'/messages?ts='+Date.now(),dataType:'text'}).then(function(e){var d=Base64.decode(e),a=JSON.parse(d);$('.home-school-popup').remove();var b=doT.template(f);$(document.body).append(b(a))}).catch(function(a){console.log(a)}))},this.keyup=function(){d=common.students[Math.floor(10*Math.random())],$.ajax({url:common.baseUrl+'/students/18/messages?ts='+Date.now(),dataType:'text'}).then(function(e){var d=Base64.decode(e),a=JSON.parse(d);console.log(a),$('.home-school-popup').remove();var b=doT.template(f);$(document.body).append(b(a))}).catch(function(a){console.log(a)})}};\n\n//# sourceMappingURL=index.js.map"]}