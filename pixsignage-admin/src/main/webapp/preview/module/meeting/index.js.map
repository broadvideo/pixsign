{"version":3,"sources":["meeting.js"],"names":[],"mappings":"aAAA,GAAI,o1BAAJ,CAoDI,QAAU,aAAyB,CACnC,KAAK,OAAL,EADmC,CAEnC,KAAK,IAAL,EAFmC,CAInC,KAAK,IAAL,CAAY,OAAO,OAAP,EAAkB,OAAO,OAAP,CAAe,OAAf,EAAlB,EAA8C,cAJvB,CAKnC,KAAK,OAAL,CAAe,UAAY,KAAK,IAAjB,CAAwB,yBALJ,CAMnC,KAAK,UAAL,CAAkB,OAAO,OAAP,EAAkB,OAAO,OAAP,CAAe,aAAf,EAAlB,EAAoD,OANnC,CAOnC,KAAK,WAAL,GAPmC,CAQnC,KAAK,QAAL,GARmC,CA6BnC,KAAK,MAAL,CAAc,aAA0B,CACpC,KAAW,GAAX,CAAe,CACX,aAAc,YADH,CAEX,eAAgB,EAAK,OAFV,CAGX,eAAgB,EAAK,OAHV,CAIX,eAAiB,SAAS,EAAK,OAAd,GAAD,CAAoC,IAJzC,CAKX,gBAAkB,SAAS,EAAK,QAAd,GAAD,CAAqC,IAL3C,CAMX,MAAS,EAAK,KANH,CAOX,cAAe,EAAK,UAPT,CAQP,YAAc,SAAS,EAAK,QAAd,GAAD,CAAqC,IAR3C,CASX,aAAc,EAAK,KATR,CAUX,cAAe,EAAK,UAVT,CAWX,aAAc,EAAK,SAXR,CAYX,cAAe,KAZJ,CAAf,CADoC,CAepC,GAAI,GAAa,KAAK,IAAL,CAAU,EAAK,MAAL,EAAoC,CAArB,IAAK,IAAL,GAAf,CAAV,CAAjB,CACI,EAAW,EAAK,QAAL,EADf,CAEA,KAAW,IAAX,CAAgB,GAAhB,EAAqB,GAArB,CAAyB,CACrB,cAAe,EAAa,CAAb,CAAiB,IADX,CAErB,aAAc,EAAK,KAFE,CAGrB,YAAa,EAAW,IAHH,CAIrB,gBAAgB,UAJK,CAKrB,SAAU,QALW,CAMrB,cAAc,QANO,CAOrB,OAAQ,CAPa,CAAzB,CAjBoC,CA0BpC,KAAW,IAAX,CAAgB,KAAhB,EAAuB,GAAvB,CAA2B,CACvB,OAAU,MAAmB,IADN,CAEvB,aAAc,EAAK,KAFI,CAA3B,CAIH,CA3DkC,CAkFnC,KAAK,IAAL,CAAY,UAAY,CACpB,GAAI,GAAO,IAAX,CACI,EAAQ,IAAI,QAAJ,oqBADZ,CAEA,EAAK,OAAL,CAAa,IAAb,CAAkB,EAAM,QAAN,CAAlB,CACH,CAtFkC,CAwFnC,KAAK,IAAL,EAIH,CAhJD","file":"index.js","sourcesContent":["var meetings = [\r\n    {\r\n        \"id\": 0,\r\n        \"title\": \"年中市场汇报\",\r\n        \"booker\": \"张红兵\",\r\n        \"start_time\": \"9:00\",\r\n        \"end_time\": \"10:30\"\r\n    },\r\n    {\r\n        \"id\": 0,\r\n        \"title\": \"证券从业考试安排\",\r\n        \"booker\": \"马鸣放\",\r\n        \"start_time\": \"11:00\",\r\n        \"end_time\": \"11:30\"\r\n    },\r\n    {\r\n        \"id\": 0,\r\n        \"title\": \"公司问题讨论会议\",\r\n        \"booker\": \"刘海\",\r\n        \"start_time\": \"12:00\",\r\n        \"end_time\": \"13:00\"\r\n    },\r\n    {\r\n        \"id\": 0,\r\n        \"title\": \"证券公司信用汇总\",\r\n        \"booker\": \"张红兵\",\r\n        \"start_time\": \"14:00\",\r\n        \"end_time\": \"15:30\"\r\n    },\r\n    {\r\n        \"id\": 0,\r\n        \"title\": \"客户问题汇总讨论\",\r\n        \"booker\": \"李琼\",\r\n        \"start_time\": \"16:00\",\r\n        \"end_time\": \"17:00\"\r\n    },\r\n    {\r\n        \"id\": 0,\r\n        \"title\": \"年中市场汇报\",\r\n        \"booker\": \"龚春红\",\r\n        \"start_time\": \"17:30\",\r\n        \"end_time\": \"18:30\"\r\n    },\r\n    {\r\n        \"id\": 0,\r\n        \"title\": \"年终茶话会\",\r\n        \"booker\": \"龚春红\",\r\n        \"start_time\": \"19:30\",\r\n        \"end_time\": \"21:30\"\r\n    }\r\n]\r\n//日历初始化\r\nvar Meeting = function (zonediv, zone) {\r\n    this.zonediv = zonediv;\r\n    this.zone = zone;\r\n\r\n    this.host = window.android && window.android.getHost() || '192.168.0.71';\r\n    this.baseUrl = 'http://' + this.host + '/pixsignage-api/service';\r\n    this.terminalId = window.android && window.android.getTerminalId() || '00001';\r\n    this.meetingRoom = {};\r\n    this.meetings = [];\r\n\r\n    var meetingTpl = `\r\n        <table>\r\n            <tbody>\r\n            {{~it:meeting:index}}\r\n            <tr class=\"meeting\">\r\n                <td width=\"20%\">\r\n                <p class=\"time\"><i class=\"fa fa-star\"></i> {{=meeting.start_time}} - {{=meeting.end_time}}</p>\r\n                <p class=\"booker\">{{=meeting.booker}}</p>\r\n                </td>\r\n                <td width=\"60%\">\r\n                <p class=\"title\">{{=meeting.title}}</p>\r\n                <p>&nbsp;</p>\r\n                </td>\r\n                <td width=\"20%\" align=\"right\"><img src=\"./module/meeting/qrcode.png\" /></td>\r\n            </tr>\r\n            {{~}}\r\n            </tbody>\r\n        </table>`\r\n\r\n    this.resize = function (scalew, scaleh) {\r\n        $(zonediv).css({\r\n            'box-sizing': 'border-box',\r\n            'border-color': zone.bdcolor,\r\n            'border-style': zone.bdstyle,\r\n            'border-width': (parseInt(zone.bdwidth) / scalew) + 'px',\r\n            'border-radius': (parseInt(zone.bdradius) / scalew) + 'px',\r\n            'color': zone.color,\r\n            'font-family': zone.fontfamily,\r\n                'font-size': (parseInt(zone.fontsize) / scalew) + 'px',\r\n            'text-align': zone.align,\r\n            'font-weight': zone.fontweight,\r\n            'font-style': zone.fontstyle,\r\n            'line-height': '1px'\r\n        });\r\n        var lineHeight = Math.ceil(zone.height / (zone.rows * scaleh * 2))\r\n        var fontsize = zone.fontsize / scaleh\r\n        $(zonediv).find('p').css({\r\n            'line-height': lineHeight - 3 + 'px',\r\n            'text-align': zone.align,\r\n            'font-size': fontsize + 'px',\r\n            'text-overflow':'ellipsis',\r\n            overflow: 'hidden',\r\n            'white-space':'nowrap',\r\n            margin: 0\r\n        });\r\n        $(zonediv).find('img').css({\r\n            'height': 1.4 * lineHeight + 'px',\r\n            'text-align': zone.align\r\n        });\r\n    };\r\n\r\n    // 数据初始化\r\n    /*this.init = function () {\r\n        var thiz = this\r\n        $.ajax({\r\n            url: `${thiz.baseUrl}/terminals/${thiz.terminalId}/meetingroom?ts=${Date.now()}`,\r\n            dataType: 'json'\r\n        }).then(function (res) {\r\n            thiz.meetingRoom = res.meetingroom;\r\n            return $.ajax({\r\n                url: `${thiz.baseUrl}/meetingrooms/${thiz.meetingRoom.id}/meetings?ts=${Date.now()}`,\r\n                dataType: 'json'\r\n            });\r\n        }).then(function (res) {\r\n            thiz.meetings = res.data;\r\n            var templ = doT.template(meetingTpl)\r\n            thiz.zonediv.html(templ(thiz.meetings))\r\n        }).catch(function (err) {\r\n            console.log(err.message);\r\n        });\r\n    }*/\r\n\r\n    this.init = function () {\r\n        var thiz = this\r\n        var templ = doT.template(meetingTpl)\r\n        thiz.zonediv.html(templ(meetings))\r\n    }\r\n\r\n    this.init()\r\n\r\n    //周期性更新数据\r\n    //setTimeout(this.init, 300000)\r\n};\r\n"]}